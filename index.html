<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desafio 30 Dias de Hobbies</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    h1, h2 {
      color: #4a6cf7;
    }
    button {
      background: #4a6cf7;
      color: white;
      border: none;
      padding: 12px 20px;
      margin: 10px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }
    button:hover {
      background: #3451c7;
      transform: scale(1.05);
    }
    .hidden {
      display: none;
    }
    .question {
      margin: 20px 0;
      text-align: left;
    }
    .progress-container {
      width: 100%;
      background: #ddd;
      border-radius: 20px;
      margin: 20px 0;
      height: 25px;
    }
    .progress-bar {
      height: 25px;
      background: #4a6cf7;
      width: 0%;
      border-radius: 20px;
      transition: width 0.5s ease;
    }
    .hobby-card {
      background: white;
      border-radius: 15px;
      padding: 15px;
      margin: 10px 0;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- Questionário -->
    <div id="quiz-section">
      <h1>📱 Questionário: Seu uso de telas</h1>
      <form id="quiz-form">
        <div class="question">1. Você pega o celular logo ao acordar?
          <br><input type="number" name="q1" min="1" max="5" required>
        </div>
        <div class="question">2. Sente ansiedade quando fica sem acesso à internet ou celular?
          <br><input type="number" name="q2" min="1" max="5" required>
        </div>
        <div class="question">3. Passa mais de 4 horas por dia em redes sociais?
          <br><input type="number" name="q3" min="1" max="5" required>
        </div>
        <div class="question">4. Usa o celular enquanto está com amigos ou família?
          <br><input type="number" name="q4" min="1" max="5" required>
        </div>
        <div class="question">5. Fica até tarde da noite no celular/computador, mesmo com sono?
          <br><input type="number" name="q5" min="1" max="5" required>
        </div>
        <div class="question">6. Tem dificuldade de se concentrar em tarefas sem checar notificações?
          <br><input type="number" name="q6" min="1" max="5" required>
        </div>
        <div class="question">7. Já perdeu prazos ou deixou de fazer algo importante por estar no celular?
          <br><input type="number" name="q7" min="1" max="5" required>
        </div>
        <div class="question">8. Usa telas (celular, TV, computador) durante as refeições?
          <br><input type="number" name="q8" min="1" max="5" required>
        </div>
        <div class="question">9. Já tentou reduzir o tempo de tela e não conseguiu?
          <br><input type="number" name="q9" min="1" max="5" required>
        </div>
        <div class="question">10. Sente que o uso excessivo de telas afeta seu humor ou produtividade?
          <br><input type="number" name="q10" min="1" max="5" required>
        </div>
        <div class="question">11. Você passa muito tempo no Instagram?
          <br><input type="number" name="q11" min="1" max="5" required>
        </div>
        <div class="question">12. Você costuma assistir vários vídeos seguidos no YouTube?
          <br><input type="number" name="q12" min="1" max="5" required>
        </div>
        <div class="question">13. Usa o Spotify por muitas horas seguidas?
          <br><input type="number" name="q13" min="1" max="5" required>
        </div>
        <div class="question">14. Abre o Twitter/X várias vezes ao dia?
          <br><input type="number" name="q14" min="1" max="5" required>
        </div>
        <div class="question">15. Checa o WhatsApp constantemente?
          <br><input type="number" name="q15" min="1" max="5" required>
        </div>
        <div class="question">16. Costuma passar bastante tempo no TikTok?
          <br><input type="number" name="q16" min="1" max="5" required>
        </div>
        <button type="submit">Ver resultado</button>
      </form>
    </div>

    <!-- Resultado -->
    <div id="result-section" class="hidden">
      <h2>📊 Resultado do questionário</h2>
      <canvas id="resultChart" width="400" height="400"></canvas>
      <p id="resultText"></p>
      <h3>👉 Quer participar do Desafio 30 Dias de Hobbies?</h3>
      <button id="startChallenge">Sim</button>
      <button onclick="alert('Beleza! Continue refletindo sobre seu uso de telas.')">Não</button>
    </div>

    <!-- Desafio -->
    <div id="challenge-section" class="hidden">
      <h1>🎯 Desafio 30 Dias de Hobbies</h1>
      <p>Você tem 30 dias para realizar 20 hobbies de uma lista com 60 opções.</p>
      <button id="selectHobbiesBtn">Iniciar seleção</button>

      <div id="hobby-selection" class="hidden">
        <h2>Escolha 20 hobbies:</h2>
        <div id="hobbyList"></div>
        <button id="confirmHobbies">Confirmar seleção</button>
      </div>

      <div id="dashboard" class="hidden">
        <h2>Seus Hobbies</h2>
        <div id="hobbyDashboard"></div>
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
        <p id="progress-text">0/20 concluídos</p>
        <p id="countdown"></p>
      </div>
    </div>
  </div>

  <script>
    // ======== QUESTIONÁRIO =========
    const quizForm = document.getElementById("quiz-form");
    const quizSection = document.getElementById("quiz-section");
    const resultSection = document.getElementById("result-section");
    const resultText = document.getElementById("resultText");
    const ctx = document.getElementById("resultChart");

    quizForm.addEventListener("submit", (e) => {
      e.preventDefault();
      let formData = new FormData(quizForm);
      let values = [];
      for (let [key, value] of formData.entries()) {
        values.push(parseInt(value));
      }
      let habits = values.slice(0,10).reduce((a,b)=>a+b,0);
      let apps = values.slice(10).reduce((a,b)=>a+b,0);
      let total = habits + apps;

      // Interpretacao
      let interpretation = "";
      if (total <= 32) interpretation = "✅ Uso equilibrado";
      else if (total <= 55) interpretation = "⚠️ Uso elevado (atenção!)";
      else interpretation = "📵 Alto risco de vício em telas";

      // Mostrar resultado
      quizSection.classList.add("hidden");
      resultSection.classList.remove("hidden");
      resultText.textContent = `Sua pontuação: ${total} pontos. ${interpretation}`;

      // Gráfico pizza
      new Chart(ctx, {
        type: "pie",
        data: {
          labels: ["Hábitos gerais", "Uso de apps"],
          datasets: [{
            data: [habits, apps],
            backgroundColor: ["#4a6cf7","#ff6b6b"]
          }]
        }
      });
    });

    // ======== DESAFIO =========
    const startChallengeBtn = document.getElementById("startChallenge");
    const challengeSection = document.getElementById("challenge-section");
    const selectHobbiesBtn = document.getElementById("selectHobbiesBtn");
    const hobbySelection = document.getElementById("hobby-selection");
    const confirmHobbiesBtn = document.getElementById("confirmHobbies");
    const hobbyListDiv = document.getElementById("hobbyList");
    const dashboard = document.getElementById("dashboard");
    const hobbyDashboard = document.getElementById("hobbyDashboard");
    const progressBar = document.getElementById("progress-bar");
    const progressText = document.getElementById("progress-text");
    const countdownEl = document.getElementById("countdown");

    let hobbies = Array.from({length:60}, (_,i)=>`Hobby ${i+1}`);
    let selectedHobbies = [];
    let progress = 0;
    let startDate = null;

    startChallengeBtn.onclick = () => {
      resultSection.classList.add("hidden");
      challengeSection.classList.remove("hidden");
    };

    selectHobbiesBtn.onclick = () => {
      hobbySelection.classList.remove("hidden");
      hobbyListDiv.innerHTML = hobbies.map((hobby,i)=>
        `<label><input type="checkbox" value="${hobby}"> ${hobby}</label><br>`
      ).join("");
    };

    confirmHobbiesBtn.onclick = () => {
      const checked = hobbyListDiv.querySelectorAll("input:checked");
      if (checked.length !== 20) {
        alert("Selecione exatamente 20 hobbies!");
        return;
      }
      selectedHobbies = Array.from(checked).map(c=>({name:c.value,done:false}));
      hobbySelection.classList.add("hidden");
      showDashboard();
      startDate = new Date();
      localStorage.setItem("challengeStart", startDate);
      updateCountdown();
      setInterval(updateCountdown,1000*60*60);
    };

    function showDashboard(){
      dashboard.classList.remove("hidden");
      renderHobbies();
      updateProgress();
    }

    function renderHobbies(){
      hobbyDashboard.innerHTML = "";
      selectedHobbies.forEach((h,i)=>{
        let div = document.createElement("div");
        div.className="hobby-card";
        div.innerHTML = `
          <span>${h.name}</span>
          <button onclick="toggleHobby(${i})">${h.done?"Desfazer":"Concluído ✅"}</button>
        `;
        hobbyDashboard.appendChild(div);
      });
    }

    window.toggleHobby = function(i){
      selectedHobbies[i].done = !selectedHobbies[i].done;
      renderHobbies();
      updateProgress();
    }

    function updateProgress(){
      progress = selectedHobbies.filter(h=>h.done).length;
      progressText.textContent = `${progress}/20 concluídos`;
      progressBar.style.width = `${(progress/20)*100}%`;
      if(progress===20){
        alert("🎉 Parabéns! Você concluiu o desafio!");
      }
    }

    function updateCountdown(){
      if(!startDate) return;
      let now = new Date();
      let diff = 30*24*60*60*1000 - (now - startDate);
      if(diff <= 0){
        countdownEl.textContent = "⏰ Tempo esgotado!";
        return;
      }
      let dias = Math.floor(diff/(1000*60*60*24));
      countdownEl.textContent = `⏳ Restam ${dias} dias`;
    }
  </script>
</body>
</html>
